<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        #div1{
            background-color: red;
            width: 100px;
            height: 100px;
        }

        ul{
            width:3600px;
            height:400px;
            list-style: none;
            padding : 0px
        }

        li{
            float:left;
        }
    </style>

    <script src="js/jquery-1.12.4.min.js"></script>
    <script>
        var div;
        var callback1;

        $(function(){
            $('button').click(function(){
                // var n = div.queue("fx").length;
                // console.log(n);
                // while(n--)
                //     div.stop();

                // 위와 같음
                // div.clearQueue().stop();

                // 마지막 애니메이션이 끝난 후 상태로 만듦
                // div.finish();

                div.dequeue();
            });

            console.log('before');
            // before, after 모두 출력된 후에 움직임 (비동기)
            // 애니메이션 끼리는 순차적으로 일어남 -> 수행할 애니메이션을 큐에 담아놓음
            // div = $('#div1')
            //     .animate({marginLeft:'300px'}, 1000)
            //     .animate({marginTop:'300px'}, 1000)
            //     .delay(500)
            //     .animate({marginLeft:'0px'}, 1000)
            //     .animate({marginTop:'0px'}, 1000)
            // ;
            console.log('after');

            ////////////////////////////////////////////////////////

            callback1 = function(){
                $('ul').css({marginLeft:"0px"})
                    .animate({marginLeft:"-=600"}, 500)
                    .delay(500)
                    .animate({marginLeft:"-=600"}, 500)
                    .delay(500)
                    .animate({marginLeft:"-=600"}, 500)
                    .delay(500)
                    .animate({marginLeft:"-=600"}, 500)
                    .delay(500)
                    .animate({marginLeft:"-=600"}, 500, function(){
                        setTimeout(callback1, 500);
                    })
                ;
            };
        });
    </script>
</head>
<body>
    <button>stop</button>
    <div id="div1">div</div>

    <div>
        <ul>
            <li><img src="https://dummyimage.com/600x400/000/fff&text=01" alt=""></li>
            <li><img src="https://dummyimage.com/600x400/000/fff&text=02" alt=""></li>
            <li><img src="https://dummyimage.com/600x400/000/fff&text=03" alt=""></li>
            <li><img src="https://dummyimage.com/600x400/000/fff&text=04" alt=""></li>
            <li><img src="https://dummyimage.com/600x400/000/fff&text=05" alt=""></li>
            <li><img src="https://dummyimage.com/600x400/000/fff&text=06" alt=""></li>
        </ul>
    </div>
</body>
</html>